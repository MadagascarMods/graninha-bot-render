<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graninha Bot - Automa√ß√£o</title>
    <link rel="stylesheet" href="pix-style.css">
    <meta name="theme-color" content="#10b981">
    <meta name="description" content="Automa√ß√£o de Jogos, Raspadinhas, Roleta e Quiz do Graninha">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%2310b981'/%3E%3Ctext x='50' y='60' text-anchor='middle' fill='white' font-size='40' font-family='Arial'%3EG%3C/text%3E%3C/svg%3E">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üéÆ</div>
                    <h1>Graninha Bot</h1>
                </div>
                <div class="status-indicator">
                    <div id="statusDot" class="status-dot stopped"></div>
                    <span id="statusText" class="status-text">Parado</span>
                </div>
                <div class="timer-display" style="background: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: 12px; margin-left: 16px;">
                    <span style="font-size: 14px; opacity: 0.8;">Tempo de Uso:</span>
                    <span id="sessionTimer" style="font-size: 18px; font-weight: bold; margin-left: 8px;">00:00:00</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Configuration Panel -->
            <section class="config-panel">
                <h2>Configura√ß√£o</h2>
                <div class="form-group">
                    <label for="bearerToken">Bearer Token:</label>
                    <input type="text" id="bearerToken" placeholder="Ex: 519800jYlxuAVV3BzcWqjkolsoo31MtlDquv2EUBerTC82K" required>
                    <small style="color: #6b7280; font-size: 0.875rem; margin-top: 4px; display: block;">Obtenha usando HTTP Catcher no app Graninha</small>
                </div>
                <div class="form-group">
                    <label for="exId">EX ID:</label>
                    <input type="text" id="exId" placeholder="Ex: 1147391867424495092601" required>
                    <small style="color: #6b7280; font-size: 0.875rem; margin-top: 4px; display: block;">ID do usu√°rio encontrado nas requisi√ß√µes</small>
                </div>
                <div class="form-group">
                    <label for="interval">Intervalo entre jogos (segundos):</label>
                    <div class="slider-container">
                        <input type="range" id="interval" min="60" max="300" value="120" step="10">
                        <span id="intervalValue" class="slider-value">120</span>
                    </div>
                </div>
                <div class="control-buttons">
                    <button id="startBtn" class="btn btn-primary">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        Iniciar Bot
                    </button>
                    <button id="stopBtn" class="btn btn-secondary" disabled>
                        <span class="btn-icon">‚èπÔ∏è</span>
                        Parar
                    </button>
                    <button id="clearBtn" class="btn btn-outline">
                        <span class="btn-icon">üóëÔ∏è</span>
                        Limpar Log
                    </button>

                </div>
            </section>

            <!-- Stats Panel -->
            <section class="stats-panel">
                <h2>Estat√≠sticas</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üéÆ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="requestCount">0</div>
                            <div class="stat-label">Jogos Tentados</div>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="successCount">0</div>
                            <div class="stat-label">Vit√≥rias</div>
                        </div>
                    </div>
                    <div class="stat-card error">
                        <div class="stat-icon">‚ùå</div>
                        <div class="stat-content">
                            <div class="stat-value" id="errorCount">0</div>
                            <div class="stat-label">Derrotas</div>
                        </div>
                    </div>
                    <div class="stat-card money">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalEarnings">R$ 0,00</div>
                            <div class="stat-label">Total Ganho</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- User Info Panel -->
            <section class="user-info-panel">
                <h2>Informa√ß√µes do Usu√°rio</h2>
                <div id="userInfoContainer" class="user-info-container">
                    <div class="user-info-empty">
                        <span class="empty-icon">üë§</span>
                        <p>Inicie o bot para ver as informa√ß√µes do usu√°rio</p>
                    </div>
                </div>
            </section>

            <!-- Mission Progress Panel -->
            <section class="mission-panel">
                <h2>Progresso de Jogos</h2>
                <div id="missionContainer" class="mission-container">
                    <div class="mission-empty">
                        <span class="empty-icon">üéØ</span>
                        <p>Estat√≠sticas de jogos aparecer√£o aqui ap√≥s iniciar o bot</p>
                    </div>
                </div>
            </section>

            <!-- Rewards Config Panel -->
            <section class="rewards-panel">
                <h2>Tipos de Jogos</h2>
                <div id="rewardsContainer" class="rewards-container">
                    <div class="rewards-empty">
                        <span class="empty-icon">üé≤</span>
                        <p>Carregando tipos de jogos dispon√≠veis...</p>
                    </div>
                </div>
            </section>

            <!-- Log Panel -->
            <section class="log-panel">
                <div class="log-header">
                    <h2>Log de Atividades</h2>
                    <button id="autoScrollBtn" class="btn btn-small active">Auto Scroll</button>
                </div>
                <div id="logContainer" class="log-container">
                    <div class="log-empty">
                        <span class="log-empty-icon">üìù</span>
                        <p>Clique em "Iniciar Bot" para come√ßar a automa√ß√£o do Graninha</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="session-security.js"></script>
    <script src="pix-script.js"></script>
    
    <script>
        // Adapta√ß√£o para Graninha Bot
        document.addEventListener('DOMContentLoaded', function() {
            // Pegar par√¢metros da URL
            const urlParams = new URLSearchParams(window.location.search);
            const userEmail = urlParams.get('email');
            const userId = urlParams.get('userId');

            console.log('[GRANINHA BOT] Email:', userEmail);
            console.log('[GRANINHA BOT] User ID:', userId);

            // Carregar configura√ß√µes salvas
            const savedBearerToken = localStorage.getItem('graninha_bearer_token');
            const savedExId = localStorage.getItem('graninha_ex_id');

            if (savedBearerToken) {
                document.getElementById('bearerToken').value = savedBearerToken;
            }

            if (savedExId) {
                document.getElementById('exId').value = savedExId;
            }

            // Sobrescrever fun√ß√£o de iniciar do pix-script.js
            const originalStartBtn = document.getElementById('startBtn');
            if (originalStartBtn) {
                originalStartBtn.addEventListener('click', function(e) {
                    const bearerToken = document.getElementById('bearerToken').value.trim();
                    const exId = document.getElementById('exId').value.trim();

                    if (!bearerToken || !exId) {
                        alert('Por favor, preencha o Bearer Token e o EX ID!');
                        e.stopPropagation();
                        return false;
                    }

                    // Salvar configura√ß√µes
                    localStorage.setItem('graninha_bearer_token', bearerToken);
                    localStorage.setItem('graninha_ex_id', exId);

                    console.log('[GRANINHA BOT] Configura√ß√µes salvas');
                    console.log('[GRANINHA BOT] Bearer Token:', bearerToken.substring(0, 20) + '...');
                    console.log('[GRANINHA BOT] EX ID:', exId);
                });
            }

            // Atualizar textos espec√≠ficos do Graninha
            const rewardsContainer = document.getElementById('rewardsContainer');
            if (rewardsContainer) {
                setTimeout(() => {
                    rewardsContainer.innerHTML = `
                        <div class="rewards-grid">
                            <div class="reward-item">
                                <span class="reward-icon">üé∞</span>
                                <span class="reward-name">Raspadinhas</span>
                                <span class="reward-status active">Ativo</span>
                            </div>
                            <div class="reward-item">
                                <span class="reward-icon">üé°</span>
                                <span class="reward-name">Roleta</span>
                                <span class="reward-status active">Ativo</span>
                            </div>
                            <div class="reward-item">
                                <span class="reward-icon">‚ùì</span>
                                <span class="reward-name">Quiz</span>
                                <span class="reward-status active">Ativo</span>
                            </div>
                            <div class="reward-item">
                                <span class="reward-icon">üéÆ</span>
                                <span class="reward-name">33 Jogos</span>
                                <span class="reward-status active">Ativo</span>
                            </div>
                        </div>
                    `;
                }, 1000);
            }
        });
    </script>
</body>
</html>
